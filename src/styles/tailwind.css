@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    background: var(--surface-alt);
    color: var(--ink);
    @apply scroll-smooth;
  }

  body {
    @apply min-h-dvh antialiased;
  }

  a {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:rgba(0,113,227,0.4)] focus-visible:ring-offset-2;
  }

  strong {
    color: var(--ink);
    font-weight: 600;
  }

  ::selection {
    background: rgba(0, 113, 227, 0.2);
    color: var(--ink);
  }
}

@layer components {
  /* Layout Components */
  .hero-grid {
    @apply grid gap-12 lg:grid-cols-[minmax(0,1fr)_minmax(0,1.05fr)] items-center;
  }

  /* Navigation */
  .nav-link {
    @apply inline-flex items-center justify-center rounded-full px-4 py-2 text-sm font-medium text-[var(--ink-soft)]
           transition-all duration-[var(--duration-normal)] ease-[var(--ease-smooth)]
           hover:text-[var(--ink)] hover:bg-[var(--surface-hover)];
  }

  .nav-link--active {
    @apply text-[var(--ink)] font-semibold bg-[var(--surface-hover)];
  }

  /* Modern Button System */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-[var(--radius-lg)] px-5 py-2.5 text-sm font-semibold
           transition-all duration-[var(--duration-normal)] ease-[var(--ease-smooth)]
           focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-muted)] focus-visible:ring-offset-2
           disabled:opacity-50 disabled:cursor-not-allowed disabled:pointer-events-none
           active:scale-[0.98];
  }

  .btn-primary {
    @apply btn bg-[var(--accent)] text-white shadow-[var(--shadow-sm)]
           hover:bg-[var(--accent-hover)] hover:shadow-[var(--shadow-md)]
           focus-visible:ring-[var(--accent-muted)];
  }

  .btn-secondary {
    @apply btn bg-[var(--ink)] text-white shadow-[var(--shadow-sm)]
           hover:bg-[var(--ink-soft)] hover:shadow-[var(--shadow-md)]
           focus-visible:ring-black/20;
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center gap-2 rounded-[var(--radius-lg)] px-4 py-2 text-sm font-semibold
           text-[var(--ink-soft)] transition-all duration-[var(--duration-fast)] ease-[var(--ease-smooth)]
           hover:bg-[var(--surface-hover)] hover:text-[var(--ink)]
           focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-soft)] focus-visible:ring-offset-1
           active:scale-[0.98];
  }

  .btn-link {
    @apply inline-flex items-center gap-1 px-0 py-0 text-sm font-semibold text-[var(--accent)]
           underline-offset-4 transition-all duration-[var(--duration-fast)]
           hover:text-[var(--accent-hover)] hover:underline;
  }

  .btn-danger {
    @apply btn bg-[var(--danger)] text-white shadow-[var(--shadow-sm)]
           hover:bg-[#dc2626] hover:shadow-[var(--shadow-md)]
           focus-visible:ring-[var(--danger-soft)];
  }

  .btn-outline {
    @apply btn border-2 border-[var(--divider-strong)] bg-[var(--surface)] text-[var(--ink)]
           hover:border-[var(--accent)] hover:bg-[var(--accent-soft)] hover:text-[var(--accent)]
           focus-visible:ring-[var(--accent-soft)];
  }

  .btn-sm {
    @apply px-3 py-1.5 text-xs;
  }

  .btn-compact {
    @apply px-2.5 py-1 text-xs;
  }

  /* Typography & Labels */
  .label {
    @apply text-xs font-semibold uppercase tracking-[0.3em] text-[var(--ink-muted)];
  }

  .eyebrow {
    @apply text-xs font-bold uppercase tracking-[0.4em] text-[var(--accent)] opacity-90;
  }

  /* Form Components - Enhanced with modern styles */
  .form-field {
    @apply flex flex-col gap-2 text-sm text-[var(--ink-soft)];
  }

  .form-label {
    @apply text-sm font-semibold text-[var(--ink)];
  }

  .form-hint {
    @apply text-xs text-[var(--ink-muted)];
  }

  .form-error {
    @apply text-xs font-medium text-[var(--danger)];
  }

  .input {
    @apply w-full rounded-[var(--radius-lg)] border-2 border-[var(--divider)] bg-[var(--surface)] px-4 py-3
           text-sm text-[var(--ink)] transition-all duration-[var(--duration-normal)] ease-[var(--ease-smooth)]
           placeholder:text-[var(--ink-muted)]
           hover:border-[var(--divider-strong)]
           focus-visible:outline-none focus-visible:border-[var(--accent)] focus-visible:ring-4 focus-visible:ring-[var(--accent-soft)]
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .input-error {
    @apply border-[var(--danger)] text-[var(--danger)] placeholder:text-[var(--danger)] placeholder:opacity-70
           focus-visible:border-[var(--danger)] focus-visible:ring-[var(--danger-soft)];
  }

  .textarea {
    @apply w-full rounded-[var(--radius-lg)] border-2 border-[var(--divider)] bg-[var(--surface)] px-4 py-3
           text-sm text-[var(--ink)] transition-all duration-[var(--duration-normal)] ease-[var(--ease-smooth)]
           placeholder:text-[var(--ink-muted)] resize-y
           hover:border-[var(--divider-strong)]
           focus-visible:outline-none focus-visible:border-[var(--accent)] focus-visible:ring-4 focus-visible:ring-[var(--accent-soft)];
  }

  /* Modern Table System */
  .table-wrapper {
    @apply overflow-hidden rounded-[var(--radius-xl)] border-2 border-[var(--divider)] bg-[var(--surface)]
           shadow-[var(--shadow-soft)] transition-all duration-[var(--duration-normal)]
           hover:shadow-[var(--shadow-md)];
  }

  .table {
    @apply min-w-full border-collapse text-sm text-[var(--ink-soft)];
  }

  .table thead {
    @apply bg-[var(--surface-hover)] text-xs font-bold uppercase tracking-[0.35em] text-[var(--ink-muted)]
           border-b-2 border-[var(--divider)];
  }

  .table th {
    @apply px-6 py-4 text-left font-bold whitespace-nowrap;
  }

  .table td {
    @apply px-6 py-4 align-middle border-b border-[var(--divider)];
  }

  .table tbody tr {
    @apply transition-colors duration-[var(--duration-fast)] hover:bg-[var(--surface-hover)];
  }

  .table tbody tr:last-child td {
    @apply border-b-0;
  }

  .table tfoot {
    @apply bg-[var(--surface-hover)] font-semibold text-[var(--ink)] border-t-2 border-[var(--divider)];
  }

  /* Cards & Panels */
  .card {
    @apply rounded-[var(--radius-xl)] border-2 border-[var(--divider)] bg-[var(--surface)]
           shadow-[var(--shadow-soft)] transition-all duration-[var(--duration-normal)]
           hover:shadow-[var(--shadow-md)];
  }

  .stat-card {
    @apply card px-6 py-6 space-y-3;
  }

  .stat-value {
    @apply text-3xl font-bold text-[var(--ink)] tracking-tight;
  }

  .stat-label {
    @apply text-sm font-medium text-[var(--ink-muted)] uppercase tracking-wider;
  }

  .stat-description {
    @apply text-xs text-[var(--ink-muted)] leading-relaxed;
  }

  /* Empty States */
  .empty-state {
    @apply flex flex-col items-center justify-center gap-4 rounded-[var(--radius-xl)]
           border-2 border-dashed border-[var(--divider)] bg-[var(--surface-hover)]
           px-10 py-16 text-center transition-all duration-[var(--duration-normal)]
           hover:border-[var(--accent-soft)];
  }

  .empty-state svg {
    @apply w-16 h-16 text-[var(--ink-muted)] opacity-50;
  }

  .empty-state p {
    @apply text-sm text-[var(--ink-muted)] max-w-md;
  }

  /* Modern Modal System */
  .modal {
    @apply fixed inset-0 z-[1200] flex items-center justify-center bg-black/30 p-6 backdrop-blur-xl;
  }

  .modal__overlay {
    @apply absolute inset-0;
  }

  .modal__panel {
    @apply relative z-10 w-full max-w-3xl rounded-[var(--radius-xl)] border-2 border-[var(--divider)]
           bg-[var(--surface)] px-8 py-8 shadow-[var(--shadow-glow)] backdrop-blur-xl;
  }

  .modal__close {
    @apply absolute top-4 end-4 inline-flex h-10 w-10 items-center justify-center
           rounded-[var(--radius-md)] bg-[var(--surface-hover)] text-[var(--ink)]
           shadow-[var(--shadow-sm)] transition-all duration-[var(--duration-fast)]
           hover:bg-[var(--surface-alt)] hover:shadow-[var(--shadow-md)]
           active:scale-95;
  }

  /* Toast Notifications */
  .toast {
    @apply flex items-start gap-3 rounded-[var(--radius-lg)] border-2 border-[var(--divider)]
           bg-[var(--surface)] px-5 py-4 text-sm text-[var(--ink)] shadow-[var(--shadow-md)]
           backdrop-blur-lg;
  }

  /* Tabs System */
  .tablist {
    @apply inline-flex gap-1 rounded-[var(--radius-lg)] bg-[var(--surface-hover)] p-1.5 shadow-[var(--shadow-sm)];
  }

  .tab {
    @apply rounded-[var(--radius-md)] px-4 py-2 text-sm font-medium text-[var(--ink-soft)]
           transition-all duration-[var(--duration-fast)] ease-[var(--ease-smooth)]
           hover:text-[var(--ink)] hover:bg-[var(--surface-hover)];
  }

  .tab--active {
    @apply bg-[var(--surface)] text-[var(--ink)] font-semibold shadow-[var(--shadow-sm)];
  }
}

@layer utilities {
  /* Shadow Utilities */
  .shadow-header {
    box-shadow: 0 8px 24px -8px rgba(15, 23, 42, 0.12);
  }

  /* Background Utilities */
  .bg-angled {
    background: linear-gradient(135deg, var(--accent-soft) 0%, rgba(0, 0, 0, 0) 55%);
  }

  .bg-gradient-primary {
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
  }

  .bg-gradient-soft {
    background: linear-gradient(180deg, var(--surface-alt) 0%, var(--surface) 100%);
  }

  /* Dividers */
  .divider {
    @apply divider-horizontal;
  }

  .divider-horizontal {
    @apply h-px bg-gradient-to-r from-transparent via-[var(--divider-strong)] to-transparent;
  }

  .divider-vertical {
    @apply w-px bg-gradient-to-b from-transparent via-[var(--divider-strong)] to-transparent;
  }

  /* Animation Delays */
  .delay-1 {
    animation-delay: 100ms;
  }

  .delay-2 {
    animation-delay: 200ms;
  }

  .delay-3 {
    animation-delay: 300ms;
  }

  .delay-4 {
    animation-delay: 400ms;
  }

  /* Fade In Animations */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-up {
    animation: fadeInUp var(--duration-slow) var(--ease-smooth);
  }

  /* Scale on Hover */
  .hover-scale {
    @apply transition-transform duration-[var(--duration-normal)] hover:scale-[1.02] active:scale-[0.98];
  }

  /* Focus Ring */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-[var(--accent-soft)] focus-visible:ring-offset-2;
  }

  /* Text Utilities */
  .text-balance {
    text-wrap: balance;
  }

  .text-gradient {
    @apply bg-gradient-to-r from-[var(--accent)] to-[var(--info)] bg-clip-text text-transparent;
  }

  /* Glass Effect */
  .glass {
    @apply backdrop-blur-xl bg-[var(--surface-gloss)] border border-white/40 shadow-[var(--shadow-soft)];
  }

  /* Skeleton Loader */
  @keyframes shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  .skeleton {
    @apply bg-gradient-to-r from-[var(--surface-alt)] via-[var(--surface-hover)] to-[var(--surface-alt)]
           bg-[length:1000px_100%] animate-[shimmer_2s_infinite];
  }
}
